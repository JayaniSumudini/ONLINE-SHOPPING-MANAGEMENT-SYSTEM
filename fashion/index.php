tPatternsAgainstHTML(a);if(s)return t.Logger.log("Page contains disqualifying phrases for language ["+i+"]. Failing classification by dictionaries"),t.resolve(-1)}}}return t.Logger.log("classifyByDisqualifyingDictionaries result: 0"),t.resolve(0)},n.classifyByProductImage=function(e){var r,n=t.Common.ImageUtils.getFirstEcommerceImage(!0,!1),o=new t.ProductBoxes.ScraperBase,i=o.findPriceElements(document.body),a=i&&i.length>0;return r=n&&a?1:0,t.Logger.log("Product image (ribbon logic): "+r+". Image found: "+!!n+" Price found: "+a),t.resolve(r)},n.blackRegex=/twitter\.com|tube|lazada|shopzilla\.|beso\.|kelkoo\.|orange\.|gameforge|infojobs|(allmyvideos|laposte|megafilmeshd|vidspot)\.net|gov\.|wikipedia\.org|(pricegrabber|stackoverflow|hulu|bloomberg|blogger|dartybox|alexa|baidu|cj|cnn|facebook|flickr|history|hotmail|imdb|imvu|linkedin|microsoft|msn|myspace|netflix|nytimes|politico|picasa|pinterest|delta-search|sfgate|shutterfly|techcrunch|verizon|venturebeat|wired|yankodesign|youtube|bing|vk|live|tumblr|roblox|411answers|tagged|nickjr|opposingviews|truste|adobe|breakfastdailynews|\.avg|espn\.go|\.aol|pogo|pornhub|youporn|pron|youjizz|xnxx|marca|elpais|juegos|surveysresearchgroup|dofus|adopteunmec|unique|nationzoom|sncf|privee|awesomehp|updateflashplayer|stocktradingcenters|empowernetwork|regionalhealthreview|websurveycentral|\.att|news788|411source|hsselite|verizonwireless|internetautoguide|symantec|\.pch|nortonpro|pchealthboost|voipo|contenko|seaworldparks|ratezip|game321|boostmobile|globo|yepi|jogatina|4shared|ojogos|tudogostoso|netcartas|voeazul|cartoonnetwork|\.tam|viajanet|vagalume|jogosdemeninas|^as|\.as|atrapalo|elconfidencial|lavanguardia|forocoches|peliculasyonkis|logitravel|freakshare|elperiodico|iberia|filmaffinity|chaturbate|expansion|todotest|antena3|cincodias)\.com|(elmundo|rtve|lavozdegalicia|publico|eldiariomontanes|elcomercio|\.hoy|\.abc|telepizza|europapress)\.es|paypal\.|filmesonlinegratis|google|.gov|.edu|qvo6|cam4|surveyservers|games.la|jeu.info/i,n}();r.CommerceHelper=n}(r=t.Vertical||(t.Vertical={}))}(t=e.Shared_0_0_668||(e.Shared_0_0_668={}))}(FO||(FO={}));var FO;!function(e){var t;!function(t){var r;!function(t){var r=function(){function t(e,t,r){this.minHoverMS=e,this.maxHoverMS=t,this.onHoverDone=r}return t.prototype.hoverStart=function(e,t,r){null==e.hoverStartTime&&(e.hoverStartTime=(new Date).getTime())},t.prototype.hoverEnd=function(t,r,n){if(!(e.$(n.toElement).closest(n.currentTarget).length>0)){if(null!=t.hoverStartTime){var o=(new Date).getTime()-t.hoverStartTime;o>t.minHoverMS&&o<t.maxHoverMS&&t.onHoverDone(o)}t.hoverStartTime=null}},t}();t.HoverTarget=r}(r=t.Model||(t.Model={}))}(t=e.Shared_0_0_668||(e.Shared_0_0_668={}))}(FO||(FO={}));var FO;!function(e){var t;!function(t){var r;!function(r){var n=function(e){function r(r,n){e.call(this),this.offers=[];var i=t.StaticCol.select(n,function(e){return new o(r,e)});this.offers=i,this.context=r}return __extends(r,e),r}(r.ModelBase);r.GenericOffersModel=n;var o=function(n){function o(e,o){var i=this;n.call(this),this.offer=null,this.url=null,this.clickNotified=!1,this.hoverTarget=new r.HoverTarget(4e3,6e4,function(e){return t.Logger.Analytics.notify(i.context,t.Logger.Analytics.HOVER,{time:e+""})}),this.context=e,this.offer=o,this.url=o.url}return __extends(o,n),o.prototype.windowOpen=function(t,r){var n=e.$('<iframe width="0" height="0" style="display: none"></iframe>')[0];document.body.appendChild(n);var o=n.contentWindow.open.apply(window,[t,r]);return document.body.removeChild(n),o},o.prototype.hoverStart=function(e,t){this.hoverTarget.hoverStart(this.hoverTarget,e,t)},o.prototype.hoverEnd=function(e,t){this.hoverTarget.hoverEnd(this.hoverTarget,e,t)},o}(r.ModelBase);r.GenericOfferModel=o}(r=t.Model||(t.Model={}))}(t=e.Shared_0_0_668||(e.Shared_0_0_668={}))}(FO||(FO={}));var FO;!function(e){var t;!function(e){var t;!function(t){var r=function(t){function r(r,o){t.call(this),this.offers=[];var i=e.StaticCol.select(o,function(e){return new n(r,e)});this.offers=i,this.context=r}return __extends(r,t),r}(t.ModelBase);t.DealsModel=r;var n=function(t){function r(e,r){t.call(this,e,r),this.offer=r}return __extends(r,t),r.prototype.onClick=function(t,r){r&&r.preventDefault();var n;if(n=window.FO_OPENONCURRENTPAGE&&this.context.overrides().boolValue("open-on-current-window",!1)?t.windowOpen(t.offer.url,"_top"):t.windowOpen(t.offer.url,"_blank"),!t.clickNotified){t.clickNotified=!0;var o=e.Data.DealHelper.clickDataFromDeal(t.offer);e.Logger.Analytics.notify(t.context,e.Logger.Analytics.CLICK,o),t.offer.onClick&&t.offer.onClick()}},r}(t.GenericOfferModel);t.DealModel=n}(t=e.Model||(e.Model={}))}(t=e.Shared_0_0_668||(e.Shared_0_0_668={}))}(FO||(FO={}));var FO;!function(e){var t;!function(t){var r;!function(r){var n=function(e){function r(r,n,i){e.call(this,r,n),this.displayWindowOffers=[],this.offers=t.StaticCol.select(n,function(e){return new o(r,e)}),this.displayWindowOffers=t.StaticCol.select(i,function(e){return new o(r,e)}),this.context=r}return __extends(r,e),r}(r.GenericOffersModel);r.RibbonOffersModel=n;var o=function(t){function r(r,n){t.call(this,r,n),this.zoomVisible=e.ko.observable(!1)}return __extends(r,t),r.prototype.hideZoom=function(e,t){t.stopPropagation(),e.zoomVisible(!1)},r.prototype.zoomIntoOffer=function(e,r){r.stopPropagation(),t.prototype.hoverStart.call(this,e,r),e.zoomVisible(!0)},r.prototype.zoomOutOfOffer=function(e,r){r.stopPropagation(),t.prototype.hoverEnd.call(this,e,r),e.zoomVisible(!1)},r}(r.DealModel)